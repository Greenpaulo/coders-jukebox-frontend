{"ast":null,"code":"import _taggedTemplateLiteral from \"@babel/runtime/helpers/esm/taggedTemplateLiteral\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Coding\\\\MyProjects\\\\coders-jukebox-frontend\\\\context\\\\GlobalState.js\";\n\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n      query LoginQuery{\\n        login(email: \", \", password: \", \") {\\n          userId,\\n          token\\n        }\\n      }\\n    \"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport { createContext, useReducer } from 'react';\nimport gql from 'graphql-tag';\nimport AppReducer from './AppReducer';\nimport { useQuery } from '@apollo/react-hooks'; // Inital State\n\nvar initialState = {\n  authenticated: false,\n  user: null,\n  video: null,\n  comment: null\n}; // Create context\n\nexport var GlobalContext = createContext(initialState); // Provider Component\n\nexport var GlobalProvider = function GlobalProvider(_ref) {\n  var children = _ref.children;\n\n  var _useReducer = useReducer(AppReducer, initialState),\n      state = _useReducer[0],\n      dispatch = _useReducer[1]; // Actions\n\n\n  var login = function login(email, password) {\n    // Make a API query to get a token\n    var LOGIN_QUERY = gql(_templateObject(), email, password);\n\n    var _useQuery = useQuery(LOGIN_QUERY),\n        data = _useQuery.data;\n\n    dispatch({\n      type: 'LOGIN',\n      payload: {\n        data: data\n      }\n    });\n  };\n\n  return __jsx(GlobalContext.Provider, {\n    value: {\n      isLoggedIn: state.isLoggedIn,\n      login: login\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 5\n    }\n  }, children);\n};","map":{"version":3,"sources":["C:/Coding/MyProjects/coders-jukebox-frontend/context/GlobalState.js"],"names":["createContext","useReducer","gql","AppReducer","useQuery","initialState","authenticated","user","video","comment","GlobalContext","GlobalProvider","children","state","dispatch","login","email","password","LOGIN_QUERY","data","type","payload","isLoggedIn"],"mappings":";;;;;;;;;;;;;;;;;;AAAA,SAASA,aAAT,EAAwBC,UAAxB,QAAyC,OAAzC;AACA,OAAOC,GAAP,MAAgB,aAAhB;AACA,OAAOC,UAAP,MAAuB,cAAvB;AACA,SAASC,QAAT,QAAyB,qBAAzB,C,CAEA;;AACA,IAAMC,YAAY,GAAG;AACnBC,EAAAA,aAAa,EAAE,KADI;AAEnBC,EAAAA,IAAI,EAAE,IAFa;AAGnBC,EAAAA,KAAK,EAAE,IAHY;AAInBC,EAAAA,OAAO,EAAE;AAJU,CAArB,C,CAOA;;AACA,OAAO,IAAMC,aAAa,GAAGV,aAAa,CAACK,YAAD,CAAnC,C,CAEP;;AACA,OAAO,IAAMM,cAAc,GAAG,SAAjBA,cAAiB,OAAkB;AAAA,MAAfC,QAAe,QAAfA,QAAe;;AAAA,oBAEpBX,UAAU,CAACE,UAAD,EAAaE,YAAb,CAFU;AAAA,MAEvCQ,KAFuC;AAAA,MAEhCC,QAFgC,mBAI9C;;;AACA,MAAMC,KAAK,GAAG,SAARA,KAAQ,CAACC,KAAD,EAAQC,QAAR,EAAqB;AAEjC;AACA,QAAMC,WAAW,GAAGhB,GAAH,oBAEEc,KAFF,EAEsBC,QAFtB,CAAjB;;AAHiC,oBAWhBb,QAAQ,CAACc,WAAD,CAXQ;AAAA,QAWzBC,IAXyB,aAWzBA,IAXyB;;AAajCL,IAAAA,QAAQ,CAAC;AACPM,MAAAA,IAAI,EAAE,OADC;AAEPC,MAAAA,OAAO,EAAE;AACPF,QAAAA,IAAI,EAAJA;AADO;AAFF,KAAD,CAAR;AAMD,GAnBD;;AAqBA,SACE,MAAC,aAAD,CAAe,QAAf;AAAwB,IAAA,KAAK,EAAE;AAC7BG,MAAAA,UAAU,EAAET,KAAK,CAACS,UADW;AAE7BP,MAAAA,KAAK,EAALA;AAF6B,KAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAIGH,QAJH,CADF;AAQD,CAlCM","sourcesContent":["import { createContext, useReducer} from 'react';\r\nimport gql from 'graphql-tag';\r\nimport AppReducer from './AppReducer';\r\nimport { useQuery } from '@apollo/react-hooks';\r\n\r\n// Inital State\r\nconst initialState = {\r\n  authenticated: false,\r\n  user: null,\r\n  video: null,\r\n  comment: null\r\n}\r\n\r\n// Create context\r\nexport const GlobalContext = createContext(initialState);\r\n\r\n// Provider Component\r\nexport const GlobalProvider = ({ children }) => {\r\n  \r\n  const [state, dispatch] = useReducer(AppReducer, initialState)\r\n\r\n  // Actions\r\n  const login = (email, password) => {\r\n\r\n    // Make a API query to get a token\r\n    const LOGIN_QUERY = gql`\r\n      query LoginQuery{\r\n        login(email: ${email}, password: ${password}) {\r\n          userId,\r\n          token\r\n        }\r\n      }\r\n    `\r\n    const { data } = useQuery(LOGIN_QUERY);\r\n\r\n    dispatch({\r\n      type: 'LOGIN',\r\n      payload: {\r\n        data\r\n      }\r\n    });\r\n  }\r\n\r\n  return (\r\n    <GlobalContext.Provider value={{\r\n      isLoggedIn: state.isLoggedIn,\r\n      login\r\n    }}>\r\n      {children}\r\n    </GlobalContext.Provider>\r\n  )\r\n}"]},"metadata":{},"sourceType":"module"}