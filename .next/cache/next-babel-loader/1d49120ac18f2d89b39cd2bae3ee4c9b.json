{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Coding\\\\MyProjects\\\\coders-jukebox-frontend\\\\pages\\\\_app.js\";\n\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { GlobalContext, GlobalProvider } from '../context/GlobalState'; // import { login } from '../context/Actions';\n\nimport Layout from '../components/Layout';\nimport { useState } from 'react'; // import gql from 'graphql-tag';\n\nvar App = function App(_ref) {\n  var Component = _ref.Component,\n      pageProps = _ref.pageProps;\n\n  // State\n  var _useState = useState({\n    authenticated: false,\n    userId: null,\n    token: null,\n    tokenExpiration: null\n  }),\n      authState = _useState[0],\n      setAuthState = _useState[1];\n\n  var _useState2 = useState({\n    user: null\n  }),\n      userState = _useState2[0],\n      setUserState = _useState2[1];\n\n  var _useState3 = useState({\n    video: null\n  }),\n      videoState = _useState3[0],\n      setVideoState = _useState3[1];\n\n  var _useState4 = useState({\n    comment: null\n  }),\n      commentState = _useState4[0],\n      setCommentState = _useState4[1]; // Auth actions\n  // Login a user\n\n\n  var login = function login(email, password) {\n    var requestBody, res, data, _data$data$login, userId, token;\n\n    return _regeneratorRuntime.async(function login$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            console.log('login action called in _app.js'); // Make a API query to get a token\n\n            requestBody = {\n              query: \"\\n        query {\\n          login(email: \\\"\".concat(email, \"\\\", password: \\\"\").concat(password, \"\\\") {\\n            userId,\\n            token\\n          }\\n        }\\n      \")\n            };\n            _context.prev = 2;\n            _context.next = 5;\n            return _regeneratorRuntime.awrap(fetch('http://localhost:5000/graphql', {\n              method: 'POST',\n              body: JSON.stringify(requestBody),\n              headers: {\n                'Content-Type': 'application/json'\n              }\n            }));\n\n          case 5:\n            res = _context.sent;\n            console.log(res.status);\n\n            if (!(res.status !== 200 && res.status !== 201)) {\n              _context.next = 9;\n              break;\n            }\n\n            throw new Error('Login failed!');\n\n          case 9:\n            _context.next = 11;\n            return _regeneratorRuntime.awrap(res.json());\n\n          case 11:\n            data = _context.sent;\n\n            if (!data.errors) {\n              _context.next = 15;\n              break;\n            }\n\n            data.errors.map(function (error) {\n              console.log(error.message);\n            });\n            return _context.abrupt(\"return\");\n\n          case 15:\n            // Set state with returned auth data\n            _data$data$login = data.data.login, userId = _data$data$login.userId, token = _data$data$login.token;\n            console.log(data.data.login);\n            setAuthState(_objectSpread({}, authState, {\n              authenticated: true,\n              userId: userId,\n              token: token\n            }));\n            console.log(authState);\n            _context.next = 24;\n            break;\n\n          case 21:\n            _context.prev = 21;\n            _context.t0 = _context[\"catch\"](2);\n            console.log(_context.t0);\n\n          case 24:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[2, 21]], Promise);\n  }; // Register a user\n\n\n  var register = function register(firstName, lastName, email, password) {\n    var requestBody, res, data, id;\n    return _regeneratorRuntime.async(function register$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            console.log('register action called in _app.js'); // Make a API query to get a token\n\n            requestBody = {\n              query: \"\\n      mutation {\\n        createUser(firstName: \\\"\".concat(firstName, \"\\\", lastName: \\\"\").concat(lastName, \"\\\", email: \\\"\").concat(email, \", password: \\\"\").concat(password, \"\\\") {\\n          userId,\\n          token\\n        }\\n      }\\n    \")\n            };\n            _context2.prev = 2;\n            _context2.next = 5;\n            return _regeneratorRuntime.awrap(fetch('http://localhost:5000/graphql', {\n              method: 'POST',\n              body: JSON.stringify(requestBody),\n              headers: {\n                'Content-Type': 'application/json'\n              }\n            }));\n\n          case 5:\n            res = _context2.sent;\n            console.log(res.status); // if(res.status != 200 || res.status != 201) {\n            //   throw new Error('Login failed!');\n            // } \n            // .json() is a method from fetch API that auto extracts & parses the res body\n\n            _context2.next = 9;\n            return _regeneratorRuntime.awrap(res.json());\n\n          case 9:\n            data = _context2.sent;\n\n            if (!data.errors) {\n              _context2.next = 13;\n              break;\n            }\n\n            data.errors.map(function (error) {\n              console.log(error.message);\n            });\n            return _context2.abrupt(\"return\");\n\n          case 13:\n            id = data.data.user;\n            console.log(id);\n            _context2.next = 20;\n            break;\n\n          case 17:\n            _context2.prev = 17;\n            _context2.t0 = _context2[\"catch\"](2);\n            console.log(_context2.t0);\n\n          case 20:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, [[2, 17]], Promise);\n  };\n\n  return __jsx(GlobalContext.Provider, {\n    value: {\n      authState: authState,\n      userState: userState,\n      videoState: videoState,\n      commentState: commentState,\n      login: login\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 5\n    }\n  }, __jsx(Layout, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 7\n    }\n  }, __jsx(Component, _extends({}, pageProps, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 9\n    }\n  }))));\n};\n\nexport default App;","map":{"version":3,"sources":["C:/Coding/MyProjects/coders-jukebox-frontend/pages/_app.js"],"names":["GlobalContext","GlobalProvider","Layout","useState","App","Component","pageProps","authenticated","userId","token","tokenExpiration","authState","setAuthState","user","userState","setUserState","video","videoState","setVideoState","comment","commentState","setCommentState","login","email","password","console","log","requestBody","query","fetch","method","body","JSON","stringify","headers","res","status","Error","json","data","errors","map","error","message","register","firstName","lastName","id"],"mappings":"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","sourcesContent":["import { GlobalContext, GlobalProvider } from '../context/GlobalState';\r\n// import { login } from '../context/Actions';\r\nimport Layout from '../components/Layout';\r\nimport { useState } from 'react';\r\n\r\n// import gql from 'graphql-tag';\r\n\r\n\r\nconst App = ({ Component, pageProps }) => {\r\n\r\n  // State\r\n  const [authState, setAuthState] = useState({\r\n    authenticated: false,\r\n    userId: null,\r\n    token: null,\r\n    tokenExpiration: null\r\n  });\r\n\r\n  const [userState, setUserState] = useState({\r\n    user: null\r\n  });\r\n\r\n  const [videoState, setVideoState] = useState({\r\n    video: null\r\n  });\r\n\r\n  const [commentState, setCommentState] = useState({\r\n    comment: null\r\n  });\r\n\r\n\r\n\r\n  // Auth actions\r\n\r\n  // Login a user\r\n  const login = async (email, password) => {\r\n    console.log('login action called in _app.js')\r\n\r\n    // Make a API query to get a token\r\n    const requestBody = {\r\n      query: `\r\n        query {\r\n          login(email: \"${email}\", password: \"${password}\") {\r\n            userId,\r\n            token\r\n          }\r\n        }\r\n      `\r\n    }\r\n\r\n    try {\r\n      const res = await fetch('http://localhost:5000/graphql', {\r\n        method: 'POST',\r\n        body: JSON.stringify(requestBody),\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        }\r\n      })\r\n\r\n      console.log(res.status);\r\n\r\n      if(res.status !== 200 && res.status !== 201) {\r\n        throw new Error('Login failed!');\r\n      } \r\n\r\n      // .json() is a method from fetch API that auto extracts & parses the res body\r\n      const data = await res.json();\r\n\r\n      // Check for errors array in response\r\n      if (data.errors){\r\n        data.errors.map(error => {\r\n          console.log(error.message)\r\n        })\r\n        return\r\n      }\r\n\r\n      // Set state with returned auth data\r\n      const { userId, token} = data.data.login;\r\n      console.log(data.data.login);\r\n\r\n      setAuthState({...authState, authenticated: true, userId, token});\r\n      console.log(authState)\r\n      \r\n      \r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n    // const LOGIN_QUERY = gql`\r\n    //   query LoginQuery{\r\n    //     login(email: ${email}, password: ${password}) {\r\n    //       userId,\r\n    //       token\r\n    //     }\r\n    //   }\r\n    // `;\r\n    // const { data } = useQuery(LOGIN_QUERY);\r\n  }\r\n\r\n  // Register a user\r\n  const register = async(firstName, lastName, email, password) => {\r\n    console.log('register action called in _app.js')\r\n\r\n    // Make a API query to get a token\r\n    const requestBody = {\r\n      query: `\r\n      mutation {\r\n        createUser(firstName: \"${firstName}\", lastName: \"${lastName}\", email: \"${email}, password: \"${password}\") {\r\n          userId,\r\n          token\r\n        }\r\n      }\r\n    `\r\n    }\r\n\r\n    try {\r\n      const res = await fetch('http://localhost:5000/graphql', {\r\n        method: 'POST',\r\n        body: JSON.stringify(requestBody),\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        }\r\n      })\r\n\r\n      console.log(res.status);\r\n\r\n      // if(res.status != 200 || res.status != 201) {\r\n      //   throw new Error('Login failed!');\r\n      // } \r\n\r\n      // .json() is a method from fetch API that auto extracts & parses the res body\r\n      const data = await res.json();\r\n\r\n      // Check for errors array in response\r\n      if (data.errors) {\r\n        data.errors.map(error => {\r\n          console.log(error.message)\r\n        })\r\n        return\r\n      }\r\n\r\n      const id = data.data.user;\r\n      console.log(id);\r\n\r\n\r\n\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n    \r\n  }\r\n\r\n  \r\n\r\n  \r\n  \r\n  \r\n  return (\r\n    <GlobalContext.Provider value={{\r\n      authState,\r\n      userState,\r\n      videoState,\r\n      commentState,\r\n      login\r\n    }}>\r\n      <Layout>\r\n        <Component {...pageProps} />\r\n      </Layout>\r\n    </GlobalContext.Provider>\r\n  )\r\n}\r\n\r\nexport default App;"]},"metadata":{},"sourceType":"module"}